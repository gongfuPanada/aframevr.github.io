








<!DOCTYPE html>
<html lang="en" data-is-home="false" data-is-mobile="false" data-supports-vr="false" data-supports-touch="false" data-root-url="/" data-title="{title} | A-Frame" data-is-spa="" data-ga-id="UA-24056643-4">
  <head>
    <title>Component —  Docs - A-Frame</title>
    

<script>
var host = window.location.protocol + '//' + window.location.hostname;
if (host === 'http://aframe.io' || host === 'http://aframevr.github.io') {
  window.location.href = 'https:' + window.location.href.substring(6);
}
</script>


    <meta charset="utf-8">
    <meta name="robots" content="all">
    <meta name="description" content="A-Frame – Building Blocks for the VR Web">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta property="fb:app_id" content="1535794316743373">
    <meta property="og:title" content="A-Frame">
    <meta property="og:site_name" content="A-Frame">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://aframe.io/">
    <meta property="og:description" content="Building Blocks for the VR Web">
    <meta property="og:image" content="http://aframe.io/images/card.png">
    <meta property="og:image:secure_url" content="https://aframe.io/images/card.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@aframevr">
    <meta name="twitter:creator" content="@aframevr">
    <meta name="twitter:title" content="A-Frame">
    <meta name="twitter:description" content="Building Blocks for the VR Web">
    <meta name="twitter:image" content="https://aframe.io/images/card.png">

    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="black">
    <link rel="icon" sizes="192x192" href="/images/aframe-logo-192.png">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/images/aframe-logo-152.png">

    <link rel="alternate" type="application/rss+xml" title="Feed" href="/feed.xml">

    <script src="/js/compat.js"></script>

    
      <link rel="stylesheet" href="/css/secondary.css">
    

    
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-24056643-4', 'auto');
  ga('send', 'pageview');
</script>


  </head>
  <body data-page-layout="docs" data-page-type="core">
    
      <aside class="sidebar sidebar-mobile borderless-links c">
  <header id="header" class="header">
    <a href="#secondary-nav" class="mobile-nav-btn">Menu</a>
    <a id="logo" class="logo" href="/">
      <span class="logo__wordmark">A-Frame</span>
    </a>
  </header>
</aside>

    
    <main id="main" class="main">
      <aside class="sidebar borderless-links">

  

<div id="secondary-nav" class="secondary-nav">
  <header id="header" class="header">
    <a id="logo" class="logo" href="/">
      <span class="logo__wordmark">A-Frame</span>
    </a>
  </header>

  <ul id="nav" class="nav">
    
      <li
        
        class="nav-item"><a href="/docs/guide/" class="nav-link nav-link-docs"><span>Guide</span></a></li>
    
      <li
        
        class="nav-item"><a href="/docs/guide/getting-started.html" class="nav-link nav-link-docs"><span>Install</span></a></li>
    
      <li
        
        class="nav-item"><a href="/examples/" class="nav-link nav-link-docs"><span>Examples</span></a></li>
    
      <li
        
        class="nav-item"><a href="/faq/" class="nav-link nav-link-docs"><span>FAQ</span></a></li>
    
      <li
        
        class="nav-item"><a href="/blog/" class="nav-link nav-link-docs"><span>Blog</span></a></li>
    
      <li
        
        class="nav-item"><a href="/community/" class="nav-link nav-link-docs"><span>Community</span></a></li>
    
      <li
         data-slug="github"
        class="nav-item"><a href="https://github.com/aframevr/aframe/" class="nav-link nav-link-docs" rel="external" title="A-Frame project repository on GitHub"><span>GitHub</span></a></li>
    
      <li
         data-slug="slug"
        class="nav-item"><a href="https://aframevr-slack.herokuapp.com" class="nav-link nav-link-docs" rel="external" title="A-Frame Slack (sign up)"><span>Slack</span></a></li>
    
  </ul>
</div>


  <div class="list">
    
    
      
      <h3 class="section-title docs-section-title section-title-inactive"><a href="/docs/guide/" class="section-title-link section-title-link-inactive">Guide</a></h3>

      <ol class="subnav section-subnav numbered-subnav">
        
          <li class="subnav-item ">
            <a href="/docs/guide/" class="subnav-link">Overview</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/guide/getting-started.html" class="subnav-link">Getting Started</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/guide/building-a-basic-scene.html" class="subnav-link">Building a Basic Scene</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/guide/building-an-advanced-scene.html" class="subnav-link">Building an Advanced Scene</a>
          </li>
        
      </ol>
    
      
      <h3 class="section-title docs-section-title section-title-active"><a href="/docs/core/" class="section-title-link section-title-link-active">Core</a></h3>

      <ol class="subnav section-subnav">
        
          <li class="subnav-item ">
            <a href="/docs/core/" class="subnav-link">Entity-Component-System</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/core/entity.html" class="subnav-link">Entity</a>
          </li>
        
          <li class="subnav-item  subnav-item-current">
            <a href="/docs/core/component.html" class="subnav-link current">Component</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/core/systems.html" class="subnav-link">System</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/core/scene.html" class="subnav-link">Scene</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/core/animations.html" class="subnav-link">Animations</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/core/mixins.html" class="subnav-link">Mixins</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/core/shaders.html" class="subnav-link">Shaders</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/core/asset-management-system.html" class="subnav-link">Asset Management System</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/core/AFRAME.html" class="subnav-link">AFRAME</a>
          </li>
        
      </ol>
    
      
      <h3 class="section-title docs-section-title section-title-inactive"><a href="/docs/components/" class="section-title-link section-title-link-inactive">Components</a></h3>

      <ol class="subnav section-subnav">
        
          <li class="subnav-item ">
            <a href="/docs/components/" class="subnav-link">camera</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/components/canvas.html" class="subnav-link">canvas</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/components/collada-model.html" class="subnav-link">collada-model</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/components/cursor.html" class="subnav-link">cursor</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/components/fog.html" class="subnav-link">fog</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/components/geometry.html" class="subnav-link">geometry</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/components/keyboard-shortcuts.html" class="subnav-link">keyboard-shortcuts</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/components/light.html" class="subnav-link">light</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/components/look-at.html" class="subnav-link">look-at</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/components/look-controls.html" class="subnav-link">look-controls</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/components/material.html" class="subnav-link">material</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/components/obj-model.html" class="subnav-link">obj-model</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/components/position.html" class="subnav-link">position</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/components/raycaster.html" class="subnav-link">raycaster</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/components/rotation.html" class="subnav-link">rotation</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/components/scale.html" class="subnav-link">scale</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/components/sound.html" class="subnav-link">sound</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/components/stats.html" class="subnav-link">stats</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/components/visible.html" class="subnav-link">visible</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/components/vr-mode-ui.html" class="subnav-link">vr-mode-ui</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/components/wasd-controls.html" class="subnav-link">wasd-controls</a>
          </li>
        
      </ol>
    
      
      <h3 class="section-title docs-section-title section-title-inactive"><a href="/docs/primitives/" class="section-title-link section-title-link-inactive">Primitives</a></h3>

      <ol class="subnav section-subnav">
        
          <li class="subnav-item ">
            <a href="/docs/primitives/" class="subnav-link">Introduction</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/primitives/mesh-attributes.html" class="subnav-link">Mesh Attributes</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/primitives/a-box.html" class="subnav-link">&lt;a-box&gt;</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/primitives/a-camera.html" class="subnav-link">&lt;a-camera&gt;</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/primitives/a-collada-model.html" class="subnav-link">&lt;a-collada-model&gt;</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/primitives/a-cone.html" class="subnav-link">&lt;a-cone&gt;</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/primitives/a-cursor.html" class="subnav-link">&lt;a-cursor&gt;</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/primitives/a-curvedimage.html" class="subnav-link">&lt;a-curvedimage&gt;</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/primitives/a-cylinder.html" class="subnav-link">&lt;a-cylinder&gt;</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/primitives/a-image.html" class="subnav-link">&lt;a-image&gt;</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/primitives/a-light.html" class="subnav-link">&lt;a-light&gt;</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/primitives/a-obj-model.html" class="subnav-link">&lt;a-obj-model&gt;</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/primitives/a-plane.html" class="subnav-link">&lt;a-plane&gt;</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/primitives/a-ring.html" class="subnav-link">&lt;a-ring&gt;</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/primitives/a-sky.html" class="subnav-link">&lt;a-sky&gt;</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/primitives/a-sphere.html" class="subnav-link">&lt;a-sphere&gt;</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/primitives/a-torus.html" class="subnav-link">&lt;a-torus&gt;</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/primitives/a-video.html" class="subnav-link">&lt;a-video&gt;</a>
          </li>
        
          <li class="subnav-item ">
            <a href="/docs/primitives/a-videosphere.html" class="subnav-link">&lt;a-videosphere&gt;</a>
          </li>
        
      </ol>
    
  </div>

</aside>

<div class="content content--structured content--core copy">
  <div class="copy__wrap">

    <p class="page__section"><a href="/docs/core/" class="borderless-link">Core</a></p>
    <h1 class="page__title">Component</h1>

    <p>In the <a href="./">entity-component-system pattern</a>, a component is a reusable and modular chunks of data that plugged into an entity to add appearance, behavior, and/or functionality. As an abstract analogy, if a smartphone were defined as an entity, we might use components to give it appearance (color, shape), to define its behavior (vibrate when called, shut down on low battery), or to add functionality (camera, screen). In A-Frame, a component modifies entities which are 3D objects in the scene.</p>
<blockquote>
<p>Try to contain most logic within components in A-Frame experiences, even if the logic is one-off or ad-hoc. This encourages reusability, modularity, and sharing of code.</p>
</blockquote>
<p>Components are roughly analoguous to CSS. Like how CSS rules modify the appearance of elements, component properties modify the appearance, behavior, and functionality of entities.</p>
<h2 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h2><p>Components provide all of the features and extensibility of A-Frame. There is a lot to cover:</p>
<ul>
<li><a href="#what-a-component-looks-like">What a Component Looks Like</a><ul>
<li><a href="#from-the-dom">From the DOM</a></li>
<li><a href="#under-the-hood">Under the Hood</a></li>
</ul>
</li>
<li><a href="#schema">Schema</a><ul>
<li><a href="#property-types">Property Types</a></li>
<li><a href="#single-property-schemas">Single-Property Schemas</a></li>
<li><a href="#multi-property-schemas">Multi-Property Schemas</a></li>
</ul>
</li>
<li><a href="#lifecycle-methods">Lifecycle Methods</a><ul>
<li><a href="#component-init-set-up">Component.init()</a></li>
<li><a href="#component-update-olddata-modify-the-entity">Component.update(oldData)</a></li>
<li><a href="#component-remove-tear-down">Component.remove()</a></li>
<li><a href="#component-tick-time-run-continuously">Component.tick(time)</a></li>
<li><a href="#component-pause-stop">Component.pause()</a></li>
<li><a href="#component-play-go">Component.play()</a></li>
</ul>
</li>
<li><a href="#writing-a-component">Writing a Component</a><ul>
<li><a href="#line-component">Line Component</a></li>
<li><a href="#skeleton">Skeleton</a></li>
<li><a href="#schema">Schema</a></li>
<li><a href="#update">Update</a></li>
<li><a href="#usage">Usage</a></li>
</ul>
</li>
</ul>
<h2 id="What-a-Component-Looks-Like"><a href="#What-a-Component-Looks-Like" class="headerlink" title="What a Component Looks Like"></a>What a Component Looks Like</h2><p>A component holds a bucket of data in the form of one or more component properties. This data is used to modify the entity. Consider an <em>engine</em> component, we might define properties such as <em>horsepower</em> or <em>cylinders</em>.</p>
<p><img src="http://thevrjump.com/assets/img/articles/aframe-system/aframe-system.jpg" alt=""></p>
<div class="page-caption"><span><br>Abstract representation of a component by @rubenmueller of <a href="http://thevrjump.com" target="_blank" rel="external">The VR Jump</a>.<br></span></div>

<h3 id="From-the-DOM"><a href="#From-the-DOM" class="headerlink" title="From the DOM"></a>From the DOM</h3><p>In A-Frame, we attach and configure a component to an entity using an HTML attribute for a component name and a inline-style-like syntax for the properties:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a-entity</span> <span class="attr">light</span>=<span class="string">"type: point; color: crimson; intensity: 2.5"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-entity</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>For a component that takes a single flat property value, it looks like a normal HTML attribute:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a-entity</span> <span class="attr">position</span>=<span class="string">"0 1 4"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-entity</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="Under-the-Hood"><a href="#Under-the-Hood" class="headerlink" title="Under the Hood"></a>Under the Hood</h2><p>A component is registered using <code>AFRAME.registerComponent</code>, which we pass a component name to register a component under and a component definition. Below is the outer skeleton for the <a href="../components/position.html">position component</a>:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">AFRAME.registerComponent(<span class="string">'position'</span>, &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>A component defines a <strong>schema</strong> that defines its properties, giving <em>anatomy</em> to the component. The position component takes a flat <code>vec3</code>, or an <code>{x, y, z}</code> object.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">AFRAME.registerComponent(<span class="string">'position'</span>, &#123;</span><br><span class="line">  schema: &#123; type: <span class="string">'vec3'</span> &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Then a component defines lifecycle methods that handles what it does with its data, giving <em>physiology</em> to the component. During initialization and on attribute updates, the position component takes its <code>vec3</code> value and applies it to its <a href="http://threejs.org/docs/#Reference/Core/Object3D" target="_blank" rel="external">three.js Object3D</a>:</p>
<blockquote>
<p>Components will often be talking to the three.js API.</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">AFRAME.registerComponent(<span class="string">'position'</span>, &#123;</span><br><span class="line">  schema: &#123; type: <span class="string">'vec3'</span> &#125;,</span><br><span class="line"></span><br><span class="line">  update: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> object3D = <span class="keyword">this</span>.el.object3D;</span><br><span class="line">    <span class="keyword">var</span> data = <span class="keyword">this</span>.data;</span><br><span class="line">    object3D.position.set(data.x, data.y, data.z);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>The position component uses only a small subset of the component API. We’ll go over everything the component API has to offer.</p>
<h3 id="Properties"><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h3><table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>data</td>
<td>Parsed data object of the component derived from the schema default values, mixins, and the entity’s attributes.</td>
</tr>
<tr>
<td>el</td>
<td>Reference to the <a href="./entity.html">entity</a> element.</td>
</tr>
<tr>
<td>schema</td>
<td>Component property names, types, default values, parsers, and stringifiers.</td>
</tr>
</tbody>
</table>
<h3 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h3><table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>init</td>
<td>Called once when the component is initialized. Used to set up initial state and instantiate variables.</td>
</tr>
<tr>
<td>update</td>
<td>Called both when the component is initialized and whenever the component’s data changes (e.g, via <em>setAttribute</em>). Used to modify the entity.</td>
</tr>
<tr>
<td>remove</td>
<td>Called when the component detaches from the element (e.g., via <em>removeAttribute</em>). Used to undo all previous modifications to the entity.</td>
</tr>
<tr>
<td>tick</td>
<td>Called on each render loop or tick of the scene. Used for continuous changes.</td>
</tr>
<tr>
<td>play</td>
<td>Called whenever the scene or entity plays to add any background or dynamic behavior. Used to start or resume behavior.</td>
</tr>
<tr>
<td>pause</td>
<td>Called whenever the scene or entity pauses to remove any background or dynamic behavior. Used to pause behavior.</td>
</tr>
</tbody>
</table>
<h2 id="Schema"><a href="#Schema" class="headerlink" title="Schema"></a>Schema</h2><p>A component’s schema defines and describes the property or properties it takes. A component can either be a single-property component (one flat value) or a multi-property component (multiple named values).</p>
<p>A single-property schema might look like:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">schema: &#123;</span><br><span class="line">  type: <span class="string">'int'</span>, <span class="keyword">default</span>: <span class="number">5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>A multi-property schema might look like:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">schema: &#123;</span><br><span class="line">  color: &#123; <span class="keyword">default</span>: <span class="string">'#FFF'</span> &#125;,</span><br><span class="line">  target: &#123; type: <span class="string">'selector'</span> &#125;,</span><br><span class="line">  uv: &#123;</span><br><span class="line">    <span class="keyword">default</span>: <span class="string">'1 1'</span>,</span><br><span class="line">    parse: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> value.split(<span class="string">' '</span>).map(<span class="built_in">parseFloat</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Property-Types"><a href="#Property-Types" class="headerlink" title="Property Types"></a>Property Types</h3><p>All properties have <strong>property types</strong>. Property types define how the component parses incoming data from the DOM, and they prescribe a default value if one is not defined in the property definition. A-Frame comes with several built-in property types such as <code>boolean</code>, <code>int</code>, <code>number</code>, <code>selector</code>, <code>src</code>, <code>string</code>, and <code>vec3</code>.</p>
<p>Each type assigns a <code>parse</code> and a <code>stringify</code> function. Parsers deserialize the incoming string value from the DOM to be put into the component’s data object. Stringifiers serialize values back to the DOM when calling <code>setAttribute</code> with a non-string value. Alternatively, we can define our own property types by providing our own <code>parse</code> and/or <code>stringify</code> functions.</p>
<h3 id="Schema-Inference"><a href="#Schema-Inference" class="headerlink" title="Schema Inference"></a>Schema Inference</h3><p>Property types can either be assigned explicitly, or the schema will infer one given the default value.</p>
<p>Given a default value, the schema will infer a property type and inject a parser and stringifer into the property definition:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">schema: &#123;</span><br><span class="line">  <span class="keyword">default</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Will process to:</span></span><br><span class="line"></span><br><span class="line">schema: &#123;</span><br><span class="line">  <span class="keyword">default</span>: <span class="number">32</span>,</span><br><span class="line">  type: <span class="string">'number'</span>,</span><br><span class="line">  parse: <span class="function"><span class="keyword">function</span> <span class="title">numberParse</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">parseFloat</span>(value, <span class="number">10</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  stringify: <span class="function"><span class="keyword">function</span> <span class="title">defaultStringify</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> value.toString();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>And given only a type, the schema will infer a default value:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">schema: &#123;</span><br><span class="line">  type: &apos;vec3&apos;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Will process to:</span><br><span class="line"></span><br><span class="line">schema: &#123;</span><br><span class="line">  type: &apos;vec3&apos;,</span><br><span class="line">  default: &#123; x: 0, y: 0, z: 0 &#125;,</span><br><span class="line">  parse: AFRAME.utils.coordinates.parse,</span><br><span class="line">  stringify: AFRAME.utils.coordinates.stringify</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Single-Property-Schemas"><a href="#Single-Property-Schemas" class="headerlink" title="Single-Property Schemas"></a>Single-Property Schemas</h3><p>Single-property schemas define only a single anonymous flat property. They must define either a <code>type</code> or a <code>default</code> value to be able to infer an appropriate parser and stringifier.</p>
<p>For example, the <a href="../components/rotation.html">rotation component</a> takes a <code>vec3</code>:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">AFRAME.registerComponent(<span class="string">'rotation'</span>, &#123;</span><br><span class="line">  schema: &#123;</span><br><span class="line">    <span class="comment">// Default value will be 0, 0, 0 as defined by the vec3 property type.</span></span><br><span class="line">    type: <span class="string">'vec3'</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>And for example, the <a href="../components/visible.html">visible component</a> takes a boolean:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">AFRAME.registerComponent(<span class="string">'visible'</span>, &#123;</span><br><span class="line">  schema: &#123;</span><br><span class="line">    <span class="comment">// Type will be inferred to be boolean.</span></span><br><span class="line">    <span class="keyword">default</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="Multi-Property-Schemas"><a href="#Multi-Property-Schemas" class="headerlink" title="Multi-Property Schemas"></a>Multi-Property Schemas</h3><p>Multi-property schemas it consists of one or more named property definitions. Unlike single-property schemas, each property has a name. When a component has properties then the HTML usage syntax will look like <code>physics=&quot;mass: 2; velocity: 1 1 1&quot;</code>.</p>
<p>For example, a physics component might look like:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">AFRAME.registerComponent(<span class="string">'physics-body'</span>, &#123;</span><br><span class="line">  schema: &#123;</span><br><span class="line">    boundingBox: &#123;</span><br><span class="line">      type: <span class="string">'vec3'</span>,</span><br><span class="line">      <span class="keyword">default</span>: &#123; x: <span class="number">1</span>, y: <span class="number">1</span>, z: <span class="number">1</span> &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    mass: &#123;</span><br><span class="line">      <span class="keyword">default</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    velocity: &#123;</span><br><span class="line">      type: <span class="string">'vec3'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Lifecycle-Methods"><a href="#Lifecycle-Methods" class="headerlink" title="Lifecycle Methods"></a>Lifecycle Methods</h2><p>With the schema being the anatomy, the lifecycle methods are the physiology; the schema defines the data, the lifecycle methods <em>use</em> the data. A component has access to <code>this.data</code> which in a single-property schema is a value and in a multi-property schema is an object.</p>
<p>The handlers will almost always interact with the entity. We recommend checking out the <a href="./entity.html">Entity documentation</a>.</p>
<h3 id="Component-init"><a href="#Component-init" class="headerlink" title="Component.init()"></a>Component.init()</h3><p><code>init</code> is called once in a component’s lifecycle when it is attached to the entity. The init handler is generally used to set up state and instantiate variables that may used throughout a component. Not every component will need to define <code>init</code>. It is similar to <code>createdCallback</code> or <code>React.ComponentDidMount</code>.</p>
<p>For example, the <a href="../components/look-at.html">look-at component</a>‘s init handler sets the state of the target to <code>null</code> and instantiates a Vector object:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">init: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.target3D = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">this</span>.vector = <span class="keyword">new</span> THREE.Vector3();</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>
<p>Example uses of <code>init</code> by some A-Frame components:</p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>camera</td>
<td>Create and set a THREE.PerspectiveCamera on the entity.</td>
</tr>
<tr>
<td>cursor</td>
<td>Attach event listeners.</td>
</tr>
<tr>
<td>light</td>
<td>Register light to the lighting system.</td>
</tr>
<tr>
<td>look-at</td>
<td>Create a helper vector.</td>
</tr>
<tr>
<td>material</td>
<td>Set up variables, mainly to visualize the state of a component.</td>
</tr>
<tr>
<td>wasd-controls</td>
<td>Set up an object to keep track of pressed keys. Bind methods.</td>
</tr>
</tbody>
</table>
<h3 id="Component-update-oldData"><a href="#Component-update-oldData" class="headerlink" title="Component.update(oldData)"></a>Component.update(oldData)</h3><p><code>update</code> is called both at the beginning of a component’s lifecycle and every time a component’s data changes (e.g., as a result of <code>setAttribute</code>). The update handler often uses <code>this.data</code> to modify the entity. The update handler has access to the previous state of a component’s data via its first argument. The previous state of a component can be used to tell exactly which properties changed in order to do granular updates.</p>
<p>For example, the <a href="../components/visible.html">visible</a> component’s update handler toggles the visibility of the <a href="./entity.html">entity</a>:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">update: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.el.object3D.visible = <span class="keyword">this</span>.data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Example uses of <code>update</code> by some A-Frame components:</p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>camera</td>
<td>Set THREE.PerspectiveCamera object properties such as aspect ratio, fov, or near/far clipping planes.</td>
</tr>
<tr>
<td>look-at</td>
<td>Set or update target entity to track the position of.</td>
</tr>
<tr>
<td>material</td>
<td>If component is just attaching, create a material. If shader has not changed, update material. If shader has changed, replace the material.</td>
</tr>
<tr>
<td>wasd-controls</td>
<td>Update the position based on the current velocity. Update the velocity based on the keys pressed.</td>
</tr>
</tbody>
</table>
<h3 id="Component-remove"><a href="#Component-remove" class="headerlink" title="Component.remove()"></a>Component.remove()</h3><p><code>remove</code> is called when a component detaches from the entity (e.g., as a result of <code>removeAttribute</code>). This is used to remove all modifications, listeners, and behaviors to the entity that a component has added in its lifetime.</p>
<p>For example, when the <a href="../components/light.html">light component</a> detaches, it removes the light it previously attached to the entity:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">remove: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.el.removeObject3D(<span class="string">'light'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Example uses of <code>remove</code> by some A-Frame components:</p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>camera</td>
<td>Remove the THREE.PerspectiveCamera from the entity.</td>
</tr>
<tr>
<td>geometry</td>
<td>Set a plain THREE.Geometry on the mesh.</td>
</tr>
<tr>
<td>material</td>
<td>Set a default THREE.MeshBasicMaterial on the mesh and unregister material from the system.</td>
</tr>
<tr>
<td>wasd-controls</td>
<td>Remove keydown and keyup listeners.</td>
</tr>
</tbody>
</table>
<h3 id="Component-tick-time"><a href="#Component-tick-time" class="headerlink" title="Component.tick(time)"></a>Component.tick(time)</h3><p><code>tick</code> is called on every single tick or render loop of the scene. Expect it to run on the order of 60-90 times per second. The global uptime of the scene in seconds is passed into the tick handler, which is used to calculate time deltas.</p>
<p>For example, the <a href="../components/look-at.html">look-at</a> component’s tick handler updates the entity’s rotation to face towards a potentially moving target entity:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">tick: <span class="function"><span class="keyword">function</span> (<span class="params">t</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// target3D and vector are set from the update handler.</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.target3D) &#123;</span><br><span class="line">    <span class="keyword">this</span>.el.object3D.lookAt(<span class="keyword">this</span>.vector.setFromMatrixPosition(target3D.matrixWorld));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Example uses of <code>tick</code> by some A-Frame components:</p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>look-at</td>
<td>Update rotation of entity to face towards tracked target, in case the target is moving.</td>
</tr>
<tr>
<td>physics</td>
<td>Update the physics world simulation.</td>
</tr>
<tr>
<td>wasd-controls</td>
<td>Use current velocity to move the entity (generally the camera), update velocity if keys are pressed.</td>
</tr>
</tbody>
</table>
<h3 id="Component-pause-Component-play"><a href="#Component-pause-Component-play" class="headerlink" title="Component.pause(), Component.play()"></a>Component.pause(), Component.play()</h3><p>To support pause and play, just as with a video game or to toggle entities for performance, a component can implement the <code>play</code> and <code>pause</code> handlers. These are invoked when a component’s entity calls its <code>play</code> or <code>pause</code> method. When an entity plays or pauses, all of its child entities are also played or paused. A component should implement a play and pause handler if it registers dynamic, asynchronous, or background behaviors such as animations or event listeners.</p>
<p>For example, the [look-controls component]’s play and pause handlers toggles its event listeners for listening to input:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">pause: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.removeEventListeners()</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">play: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.addEventListeners()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Example uses of <code>pause</code> and <code>play</code> by some A-Frame components:</p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>sound</td>
<td>Pause/play sound.</td>
</tr>
<tr>
<td>wasd-controls</td>
<td>Remove/attach event listeners.</td>
</tr>
</tbody>
</table>
<h2 id="Writing-a-Component"><a href="#Writing-a-Component" class="headerlink" title="Writing a Component"></a>Writing a Component</h2><h3 id="Line-Component"><a href="#Line-Component" class="headerlink" title="Line Component"></a>Line Component</h3><p>Let’s build a basic line component that renders a line. We want to make the property API flexible enough to be able to specify the color and vertices:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a-entity</span> <span class="attr">line</span>=<span class="string">"color: red; path: -1 1 0, -1 0.5 0, -1 0 0"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-entity</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="Skeleton"><a href="#Skeleton" class="headerlink" title="Skeleton"></a>Skeleton</h4><p>Here is a skeleton of the component. We’ll just need a schema, a update handler, and a remove handler:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> coordinates = AFRAME.utils.coordinates;</span><br><span class="line"></span><br><span class="line">AFRAME.registerComponent(<span class="string">'line'</span>, &#123;</span><br><span class="line">  <span class="comment">// Allow line component to accept vertices and color.</span></span><br><span class="line">  schema: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Create or update the line geometry.</span></span><br><span class="line">  update: &#123;&#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Remove the line geometry.</span></span><br><span class="line">  remove: &#123;&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="Schema-1"><a href="#Schema-1" class="headerlink" title="Schema"></a>Schema</h4><p>We have two properties we want to accept: <code>color</code> and <code>path</code>. Thus we will need a multi-property schema. The <code>color</code> property will be a simple string that will be fed to <code>THREE.Color</code>. The <code>path</code> property will need a custom parser and stringifier to handle an array of <code>vec3</code>s for the vertices.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Allow line component to accept vertices and color.</span></span><br><span class="line">schema: &#123;</span><br><span class="line">  color: &#123; <span class="keyword">default</span>: <span class="string">'#333'</span> &#125;,</span><br><span class="line"></span><br><span class="line">  path: &#123;</span><br><span class="line">    <span class="keyword">default</span>: [</span><br><span class="line">      &#123; x: <span class="number">-0.5</span>, y: <span class="number">0</span>, z: <span class="number">0</span> &#125;,</span><br><span class="line">      &#123; x: <span class="number">0.5</span>, y: <span class="number">0</span>, z: <span class="number">0</span> &#125;</span><br><span class="line">    ],</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Deserialize path in the form of comma-separated vec3s: `0 0 0, 1 1 1, 2 0 3`.</span></span><br><span class="line">    parse: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> value.split(<span class="string">','</span>).map(coordinates.parse);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Serialize array of vec3s in case someone does</span></span><br><span class="line">    <span class="comment">// setAttribute('line', 'path', [...]).</span></span><br><span class="line">    stringify: <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> data.map(coordinates.stringify).join(<span class="string">','</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br></pre></td></tr></table></figure>
<p>The component API is entirely up to us. If we wanted the path to take a different syntax or abstract it further such that it maybe only accepts a starting point and a length and handle the math for the developer, we could do so.</p>
<h4 id="Update"><a href="#Update" class="headerlink" title="Update"></a>Update</h4><p>The schema will hand the data to the update handler all parsed and ready to go. Here, we want to create a line geometry if it doesn’t exist yet and update it if it does. We can create a line in three.js by combining a <code>THREE.LineBasicMaterial</code> and <code>THREE.Geometry</code> and then manually pushing vertices.</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">update: <span class="function"><span class="keyword">function</span> (<span class="params">oldData</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Set color with material.</span></span><br><span class="line">  <span class="keyword">var</span> material = <span class="keyword">new</span> THREE.LineBasicMaterial(&#123;</span><br><span class="line">    color: <span class="keyword">this</span>.data.color</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Add vertices to geometry.</span></span><br><span class="line">  <span class="keyword">var</span> geometry = <span class="keyword">new</span> THREE.Geometry();</span><br><span class="line">  <span class="keyword">this</span>.data.path.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">vec3</span>) </span>&#123;</span><br><span class="line">    geometry.vertices.push(</span><br><span class="line">      <span class="keyword">new</span> THREE.Vector3(vec3.x, vec3.y, vec3.z)</span><br><span class="line">    );</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Apply mesh.</span></span><br><span class="line">  <span class="keyword">this</span>.el.setObject3D(<span class="string">'mesh'</span>, <span class="keyword">new</span> THREE.Line(geometry, material));</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>
<p>Here, we update the line by completely replacing it. Though sometimes, we might want to more granularly update objects for better performance.</p>
<h4 id="Remove"><a href="#Remove" class="headerlink" title="Remove"></a>Remove</h4><p>For removal of the line mesh from the entity, we use <a href="./entity.html#remove-object3d"><code>Entity.removeObject3D</code></a>:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">remove: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.el.removeObject3D(<span class="string">'mesh'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This will remove the object from the entity’s scene graph.</p>
<h4 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h4><p>Then with the line component written and registered, we can use it in HTML:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a-scene</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a-assets</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a-mixin</span> <span class="attr">id</span>=<span class="string">"red"</span> <span class="attr">line</span>=<span class="string">"color: #E20049"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-mixin</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">a-assets</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">a-entity</span> <span class="attr">id</span>=<span class="string">"happy-face"</span> <span class="attr">position</span>=<span class="string">"0 2 -10"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a-entity</span> <span class="attr">mixin</span>=<span class="string">"red"</span> <span class="attr">line</span>=<span class="string">"path: -1 1 0, -1 0.5 0, -1 0 0"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-entity</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a-entity</span> <span class="attr">mixin</span>=<span class="string">"red"</span> <span class="attr">line</span>=<span class="string">"path: 1 1 0, 1 0.5 0, 1 0 0"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-entity</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a-entity</span> <span class="attr">mixin</span>=<span class="string">"red"</span> <span class="attr">line</span>=<span class="string">"path: -2 -1 0, 0 -2 0, 2 -1"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-entity</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">a-entity</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">a-sky</span> <span class="attr">color</span>=<span class="string">"#FFEED0"</span>&gt;</span><span class="tag">&lt;/<span class="name">a-sky</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">a-scene</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>And voila!</p>
<p><img src="http://i.imgur.com/icggby2.jpg" alt=""></p>
<div class="page-caption"><span><br>  Happy face with the line component! Play with it on <a href="http://codepen.io/team/mozvr/pen/yeEQNG" target="_blank" rel="external">Codepen</a>.<br></span></div>



    <footer class="footer guide-links c">
      
        <span class="float-left"><a href="/docs/core/entity.html" class="guide-link guide-link-left">← Entity</a></span>
      
      
        <span class="float-right"><a href="/docs/core/systems.html" class="guide-link guide-link-right">System →</a></span>
      
    </footer>

    <footer class="footer footnote">
  <p>Caught a mistake or want to contribute to the documentation? <br><br> <a href="https://github.com/aframevr/aframe/edit/master/docs/core/component.md" class="github-file-link" target="_blank" rel="external">Suggest an edit to this page on GitHub</a></p>
</footer>

  </div>
</div>

    </main>
    <script src="/js/common.js"></script>
    <script src="/js/ga.js"></script>
    <script src="/js/single-page.js"></script>
    
    
      <script src="/js/docs.js"></script>
    
  </body>
</html>
